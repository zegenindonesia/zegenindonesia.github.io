/* tipsy, facebook style tooltips for jquery version 1.0.0a (c) 2008-2010 jason frame [jason@onehackoranother.com]
 released under the MIT license */
!function($){function t(t,i){return"function"==typeof t?t.call(i):t}function i(t){for(;t=t.parentNode;)if(t==document)return!0;return!1}function e(t,i){this.$element=$(t),this.options=i,this.enabled=!0,this.fixTitle()}e.prototype={show:function(){var i=this.getTitle();if(i&&this.enabled){var e=this.tip();e.find(".tipsy-inner")[this.options.html?"html":"text"](i),e[0].className="tipsy",e.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var s=$.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight}),n=e[0].offsetWidth,o=e[0].offsetHeight,l=t(this.options.gravity,this.$element[0]),a;switch(l.charAt(0)){case"n":a={top:s.top+s.height+this.options.offset,left:s.left+s.width/2-n/2};break;case"s":a={top:s.top-o-this.options.offset,left:s.left+s.width/2-n/2};break;case"e":a={top:s.top+s.height/2-o/2,left:s.left-n-this.options.offset};break;case"w":a={top:s.top+s.height/2-o/2,left:s.left+s.width+this.options.offset}}2==l.length&&("w"==l.charAt(1)?a.left=s.left+s.width/2-15:a.left=s.left+s.width/2-n+15),e.css(a).addClass("tipsy-"+l),e.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+l.charAt(0),this.options.className&&e.addClass(t(this.options.className,this.$element[0])),this.options.fade?e.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity}):e.css({visibility:"visible",opacity:this.options.opacity})}},hide:function(){this.options.fade?this.tip().stop().fadeOut(function(){$(this).remove()}):this.tip().remove()},fixTitle:function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("original-title"))&&t.attr("original-title",t.attr("title")||"").removeAttr("title")},getTitle:function(){var t,i=this.$element,e=this.options;this.fixTitle();var t,e=this.options;return"string"==typeof e.title?t=i.attr("title"==e.title?"original-title":e.title):"function"==typeof e.title&&(t=e.title.call(i[0])),t=(""+t).replace(/(^\s*|\s*$)/,""),t||e.fallback},tip:function(){return this.$tip||(this.$tip=$('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>'),this.$tip.data("tipsy-pointee",this.$element[0])),this.$tip},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled}},$.fn.tipsy=function(t){function i(i){var s=$.data(i,"tipsy");return s||(s=new e(i,$.fn.tipsy.elementOptions(i,t)),$.data(i,"tipsy",s)),s}function s(){var e=i(this);e.hoverState="in",0==t.delayIn?e.show():(e.fixTitle(),setTimeout(function(){"in"==e.hoverState&&e.show()},t.delayIn))}function n(){var e=i(this);e.hoverState="out",0==t.delayOut?e.hide():setTimeout(function(){"out"==e.hoverState&&e.hide()},t.delayOut)}if(t===!0)return this.data("tipsy");if("string"==typeof t){var o=this.data("tipsy");return o&&o[t](),this}if(t=$.extend({},$.fn.tipsy.defaults,t),t.live||this.each(function(){i(this)}),"manual"!=t.trigger){var l=t.live?"live":"bind",a="hover"==t.trigger?"mouseenter":"focus",f="hover"==t.trigger?"mouseleave":"blur";this[l](a,s)[l](f,n)}return this},$.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:!1,fallback:"",gravity:"n",html:!1,live:!1,offset:0,opacity:.8,title:"title",trigger:"hover"},$.fn.tipsy.revalidate=function(){$(".tipsy").each(function(){var t=$.data(this,"tipsy-pointee");t&&i(t)||$(this).remove()})},$.fn.tipsy.elementOptions=function(t,i){return $.metadata?$.extend({},i,$(t).metadata()):i},$.fn.tipsy.autoNS=function(){return $(this).offset().top>$(document).scrollTop()+$(window).height()/2?"s":"n"},$.fn.tipsy.autoWE=function(){return $(this).offset().left>$(document).scrollLeft()+$(window).width()/2?"e":"w"},$.fn.tipsy.autoBounds=function(t,i){return function(){var e={ns:i[0],ew:i.length>1?i[1]:!1},s=$(document).scrollTop()+t,n=$(document).scrollLeft()+t,o=$(this);return o.offset().top<s&&(e.ns="n"),o.offset().left<n&&(e.ew="w"),$(window).width()+$(document).scrollLeft()-o.offset().left<t&&(e.ew="e"),$(window).height()+$(document).scrollTop()-o.offset().top<t&&(e.ns="s"),e.ns+(e.ew?e.ew:"")}}}(jQuery);