/*! madxartwork-pro - v2.7.3 - 28-10-2019 */
!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=14)}([,function(e,t,n){"use strict";var o=n(5);e.exports=o.extend({__construct:function(){this.cache={},o.prototype.__construct.apply(this,arguments)},getName:function(){return""},getCacheKey:function(e){return JSON.stringify({service:this.getName(),data:e})},fetchCache:function(e,t,n){var o=this;return madxartworkPro.ajax.addRequest("forms_panel_action_data",{unique_id:"integrations_"+this.getName(),data:n,success:function(n){o.cache[e]=_.extend({},o.cache[e]),o.cache[e][t]=n[e]}})},updateOptions:function(e,t){var n=this.getEditorControlView(e);n&&(this.getEditorControlModel(e).set("options",t),n.render())},onInit:function(){this.addSectionListener("section_"+this.getName(),this.onSectionActive)},onSectionActive:function(){this.onApiUpdate()},onApiUpdate:function(){}})},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return r.template=_.noop,r.activeTab="content",r.listenTo(r.model,"change",r.onModelChange),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,madxartworkModules.editor.views.ControlsStack),o(t,[{key:"getNamespaceArray",value:function(){return["popup","display-settings"]}},{key:"className",value:function(){return function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"className",this).call(this)+" madxartwork-popup__display-settings"}},{key:"toggleGroup",value:function(e,t){t.toggleClass("madxartwork-active",!!this.model.get(e))}},{key:"onRenderTemplate",value:function(){this.activateFirstSection()}},{key:"onRender",value:function(){var e=this,t=this.getOption("name"),n=void 0;this.children.each(function(o){if("heading"===o.model.get("type")){var i=o.model.get("name").replace("_heading","");n=jQuery("<div>",{id:"madxartwork-popup__"+t+"-controls-group--"+i,class:"madxartwork-popup__display-settings_controls_group"});var r=jQuery("<div>",{class:"madxartwork-popup__display-settings_controls_group__icon"}),l=jQuery("<img>",{src:madxartworkPro.config.urls.modules+"popup/assets/images/"+t+"/"+i+".svg"});r.html(l),n.html(r),o.$el.before(n),n.append(o.$el),e.toggleGroup(i,n)}else n&&n.append(o.$el)})}},{key:"onModelChange",value:function(){var e=Object.keys(this.model.changed)[0],t=this.getControlViewByName(e);"switcher"===t.model.get("type")&&this.toggleGroup(e,t.$el.parent())}}]),t}();t.default=i},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({elementType:null,__construct:function(e){this.elementType=e,this.addEditorListener()},addEditorListener:function(){var e=this;if(e.onElementChange){var t="change";"global"!==e.elementType&&(t+=":"+e.elementType),madxartwork.channels.editor.on(t,function(t,n){e.onElementChange(t.model.get("name"),t,n)})}},addControlSpinner:function(e){var t=this.getEditorControlView(e).$el,n=t.find(":input");n.attr("disabled")||(n.attr("disabled",!0),t.find(".madxartwork-control-title").after('<span class="madxartwork-control-spinner"><i class="eicon-spinner eicon-animation-spin"></i>&nbsp;</span>'))},removeControlSpinner:function(e){var t=this.getEditorControlView(e).$el;t.find(":input").attr("disabled",!1),t.find(".madxartwork-control-spinner").remove()},addSectionListener:function(e,t){var n=this;madxartwork.channels.editor.on("section:activated",function(o,i){var r=i.getOption("editedElementView").getEditModel(),l=r.get("elType"),s=arguments;"widget"===l&&(l=r.get("widgetType")),n.elementType===l&&e===o&&setTimeout(function(){t.apply(n,s)},10)})}})},function(e,t,n){"use strict";var o=n(61);e.exports=o.extend({id:"madxartwork-theme-builder-conditions-view",template:"#tmpl-madxartwork-theme-builder-conditions-view",childViewContainer:"#madxartwork-theme-builder-conditions-controls",childViewOptions:function(){return{elementSettingsModel:this.model}}})},function(e,t,n){"use strict";var o=function(e){return e&&e.__esModule?e:{default:e}}(n(62));e.exports=madxartwork.modules.controls.Repeater.extend({childView:o.default,updateActiveRow:function(){},initialize:function(){madxartwork.modules.controls.Repeater.prototype.initialize.apply(this,arguments),this.config=madxartworkPro.config.theme_builder,this.updateConditionsOptions(this.config.settings.template_type)},checkConflicts:function(e){var t=e.get("_id"),n="madxartwork-condition-id-"+t,o="madxartwork-conditions-conflict-message-"+t,i=jQuery("#"+o);jQuery("#"+n).removeClass("madxartwork-error"),i.remove(),madxartworkPro.ajax.addRequest("theme_builder_conditions_check_conflicts",{unique_id:n,data:{condition:e.toJSON({remove:["default"]})},success:function(e){_.isEmpty(e)||jQuery("#"+n).addClass("madxartwork-error").after('<div id="'+o+'" class="madxartwork-conditions-conflict-message">'+e+"</div>")}})},updateConditionsOptions:function(e){var t=this,n=t.config.types[e].condition_type,o={};_([n]).each(function(e,n){var i=t.config.conditions[e],r={label:i.label,options:{}};r.options[e]=i.all_label,_(i.sub_conditions).each(function(e){r.options[e]=t.config.conditions[e].label}),o[n]=r});var i=this.model.get("fields");i[1].default=n,"general"===n?i[1].groups=o:i[2].groups=o},onRender:function(){this.ui.btnAddRow.text(madxartworkPro.translate("add_condition"));var e=this;this.collection.each(function(t){e.checkConflicts(t)})},onRowControlChange:function(e){this.checkConflicts(e)}})},,,,,,,function(e,t,n){"use strict";var o=l(n(15)),i=l(n(16)),r=l(n(17));function l(e){return e&&e.__esModule?e:{default:e}}var s=Marionette.Application.extend({config:{},modules:{},initModules:function(){var e=n(19),t=n(21),l=n(37),s=n(39),a=n(51),u=n(52),d=n(53),c=n(55),p=n(57);this.modules={queryControl:new e,forms:new t,library:new l,customCSS:new o.default,globalWidget:new s,flipBox:new a,motionFX:new i.default,popup:new r.default,shareButtons:new u,assetsManager:new d,themeElements:new c,themeBuilder:new p}},ajax:{prepareArgs:function(e){return e[0]="pro_"+e[0],e},send:function(){return madxartworkCommon.ajax.send.apply(madxartworkCommon.ajax,this.prepareArgs(arguments))},addRequest:function(){return madxartworkCommon.ajax.addRequest.apply(madxartworkCommon.ajax,this.prepareArgs(arguments))}},translate:function(e,t){return madxartworkCommon.translate(e,null,t,this.config.i18n)},onStart:function(){this.config=madxartworkProEditorConfig,this.initModules(),jQuery(window).on("madxartwork:init",this.onmadxartworkInit)},onmadxartworkInit:function(){madxartworkPro.libraryRemoveGetProButtons(),madxartwork.debug.addURLToWatch("madxartwork-pro/assets")},libraryRemoveGetProButtons:function(){madxartwork.hooks.addFilter("madxartwork/editor/template-library/template/action-button",function(e,t){return t.isPro&&!madxartworkPro.config.isActive?"#tmpl-madxartwork-pro-template-library-activate-license-button":"#tmpl-madxartwork-template-library-insert-button"})}});window.madxartworkPro=new s,madxartworkPro.start()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,madxartworkModules.editor.utils.Module),o(t,[{key:"addPageCustomCss",value:function(){var e=madxartwork.settings.page.model.get("custom_css");e&&(e=e.replace(/selector/g,madxartwork.config.settings.page.cssWrapperSelector),madxartwork.settings.page.getControlsCSS().elements.$stylesheetElement.append(e))}},{key:"addCustomCss",value:function(e,t){var n=t.getEditModel().get("settings").get("custom_css");return n&&(e+=n.replace(/selector/g,".madxartwork-element.madxartwork-element-"+t.model.id)),e}},{key:"onmadxartworkInit",value:function(){madxartwork.hooks.addFilter("editor/style/styleText",this.addCustomCss),madxartwork.settings.page.model.on("change",this.addPageCustomCss),madxartwork.on("navigator:init",this.onNavigatorInit.bind(this))}},{key:"onNavigatorInit",value:function(){madxartwork.navigator.indicators.customCSS={icon:"code-bold",settingKeys:["custom_css"],title:madxartworkPro.translate("custom_css"),section:"section_custom_css"}}},{key:"onmadxartworkPreviewLoaded",value:function(){this.addPageCustomCss()}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,madxartworkModules.editor.utils.Module),o(t,[{key:"onmadxartworkInit",value:function(){madxartwork.on("navigator:init",this.onNavigatorInit.bind(this))}},{key:"onNavigatorInit",value:function(){madxartwork.navigator.indicators.motionFX={icon:"flash",title:madxartworkPro.translate("motion_effects"),settingKeys:["motion_fx_motion_fx_scrolling","motion_fx_motion_fx_mouse","background_motion_fx_motion_fx_scrolling","background_motion_fx_motion_fx_mouse"],section:"section_effects"}}}]),t}();t.default=i},function(e,t,n){"use strict";var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();if(madxartworkProEditorConfig.useComponentsRouter){var i=n(4),r=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return r.displaySettingsTypes={triggers:{icon:"eicon-click"},timing:{icon:"eicon-cog"}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,madxartworkModules.editor.utils.Module),o(t,[{key:"addPublishTabs",value:function(){var e=madxartwork.config.document.displaySettings,t=$e.components.get("theme-builder-publish");jQuery.each(this.displaySettingsTypes,function(n,o){o.model=new madxartworkModules.editor.elements.models.BaseSettings(e[n].settings,{controls:e[n].controls}),t.addTab(n,{View:i.default,viewOptions:{name:n,id:"madxartwork-popup-"+n+"__controls",model:o.model,controls:o.model.controls},name:n,title:madxartworkPro.translate(n),description:madxartworkPro.translate("popup_publish_screen_"+n+"_description"),image:madxartworkPro.config.urls.modules+"popup/assets/images/"+n+"-tab.svg"})})}},{key:"addPanelFooterSubmenuItems",value:function(){var e=$e.components.get("theme-builder-publish");jQuery.each(this.displaySettingsTypes,function(t,n){madxartwork.getPanelView().footer.currentView.addSubMenuItem("saver-options",{before:"save-template",name:t,icon:n.icon,title:madxartworkPro.translate(t),callback:function(){return $e.route(e.getTabRoute(t))}})})}},{key:"addLibraryTab",value:function(){var e=$e.components.get("library");e.removeTab("templates/pages"),e.addTab("templates/popups",{title:madxartworkPro.translate("popups"),filter:{source:"remote",type:"popup"}},1),e.setDefaultRoute("templates/popups")}},{key:"initIntroduction",value:function(){var e=void 0;this.getIntroduction=function(){return e||(e=new madxartworkModules.editor.utils.Introduction({introductionKey:"popupSettings",dialogOptions:{id:"madxartwork-popup-settings-introduction",headerMessage:'<i class="eicon-info"></i>'+madxartworkPro.translate("popup_settings_introduction_title"),message:madxartworkPro.translate("popup_settings_introduction_message"),closeButton:!0,closeButtonClass:"eicon-close",position:{my:"left bottom",at:"right bottom-5",autoRefresh:!0},hide:{onOutsideClick:!1}}})),e}}},{key:"onmadxartworkInit",value:function(){var e=this;"popup"===madxartwork.config.document.type&&(madxartwork.on("panel:init",function(){return e.onmadxartworkPanelInit()}),madxartwork.saver.on("save",function(){return e.onEditorSave()}),this.addLibraryTab())}},{key:"onmadxartworkPanelInit",value:function(){this.addPublishTabs(),this.addPanelFooterSubmenuItems(),madxartwork.config.user.introduction.popupSettings||this.initIntroduction()}},{key:"onmadxartworkPreviewLoaded",value:function(){"popup"===madxartwork.config.document.type&&($e.route("panel/page-settings/settings"),madxartwork.config.user.introduction.popupSettings||madxartwork.getPanelView().getCurrentPageView().on("destroy",this.onPageSettingsDestroy.bind(this)))}},{key:"onPageSettingsDestroy",value:function(){var e=this.getIntroduction();e.show(madxartwork.getPanelView().footer.currentView.ui.settings[0]),e.setViewed()}},{key:"onEditorSave",value:function(){var e={};jQuery.each(this.displaySettingsTypes,function(t,n){e[t]=n.model.toJSON({remove:["default"]})}),madxartworkPro.ajax.addRequest("popup_save_display_settings",{data:{settings:e}})}}]),t}();e.exports=r}else e.exports=n(18)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(4));var r=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return r.displaySettingsTypes={triggers:{icon:"eicon-click"},timing:{icon:"eicon-cog"}},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,madxartworkModules.editor.utils.Module),o(t,[{key:"initDisplaySettingsModels",value:function(){var e=madxartwork.config.document.displaySettings;jQuery.each(this.displaySettingsTypes,function(t,n){n.model=new madxartworkModules.editor.elements.models.BaseSettings(e[t].settings,{controls:e[t].controls})})}},{key:"addDisplaySettingsPublishScreens",value:function(e){jQuery.each(this.displaySettingsTypes,function(t,n){var o=n.model;e.addScreen({View:i.default,viewOptions:{name:t,id:"madxartwork-popup-"+t+"__controls",model:o,controls:o.controls},name:t,title:madxartworkPro.translate(t),description:madxartworkPro.translate("popup_publish_screen_"+t+"_description"),image:madxartworkPro.config.urls.modules+"popup/assets/images/"+t+"-tab.svg"})})}},{key:"addPanelFooterSubmenuItems",value:function(){var e=this;jQuery.each(this.displaySettingsTypes,function(t,n){madxartwork.getPanelView().footer.currentView.addSubMenuItem("saver-options",{before:"save-template",name:t,icon:n.icon,title:madxartworkPro.translate(t),callback:function(){return e.onPanelFooterSubmenuItemClick(t)}})})}},{key:"addLibraryScreen",value:function(){var e=madxartwork.templates.getScreens(),t=e.indexOf(_.findWhere(e,{type:"pages"}));e.splice(t-1,1,{name:"popups",source:"remote",type:"popup",title:madxartworkPro.translate("popups")}),madxartwork.templates.setDefaultScreen("popups")}},{key:"initIntroduction",value:function(){var e=void 0;this.getIntroduction=function(){return e||(e=new madxartworkModules.editor.utils.Introduction({introductionKey:"popupSettings",dialogOptions:{id:"madxartwork-popup-settings-introduction",headerMessage:'<i class="eicon-info"></i>'+madxartworkPro.translate("popup_settings_introduction_title"),message:madxartworkPro.translate("popup_settings_introduction_message"),closeButton:!0,closeButtonClass:"eicon-close",position:{my:"left bottom",at:"right bottom-5",autoRefresh:!0},hide:{onOutsideClick:!1}}})),e}}},{key:"onmadxartworkInit",value:function(){var e=this;"popup"===madxartwork.config.document.type&&(madxartwork.on("panel:init",function(){return e.onmadxartworkPanelInit()}),madxartwork.saver.on("save",function(){return e.onEditorSave()}),this.addLibraryScreen())}},{key:"onmadxartworkPanelInit",value:function(){this.initDisplaySettingsModels(),madxartworkPro.modules.themeBuilder.on("publish-layout:init",this.addDisplaySettingsPublishScreens.bind(this)),this.addPanelFooterSubmenuItems(),madxartwork.config.user.introduction.popupSettings||this.initIntroduction()}},{key:"onmadxartworkPreviewLoaded",value:function(){if("popup"===madxartwork.config.document.type){var e=madxartwork.getPanelView();e.footer.currentView.showSettingsPage("page_settings"),madxartwork.config.user.introduction.popupSettings||e.getCurrentPageView().on("destroy",this.onPageSettingsDestroy.bind(this))}}},{key:"onPageSettingsDestroy",value:function(){var e=this.getIntroduction();e.show(madxartwork.getPanelView().footer.currentView.ui.settings[0]),e.setViewed()}},{key:"onEditorSave",value:function(){var e={};jQuery.each(this.displaySettingsTypes,function(t,n){e[t]=n.model.toJSON({remove:["default"]})}),madxartworkPro.ajax.addRequest("popup_save_display_settings",{data:{settings:e}})}},{key:"onPanelFooterSubmenuItemClick",value:function(e){madxartworkPro.modules.themeBuilder.showPublishModal(),madxartworkPro.modules.themeBuilder.getPublishLayout().modalContent.currentView.showScreenByName(e)}}]),t}();t.default=r},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({onmadxartworkPreviewLoaded:function(){madxartwork.addControlView("Query",n(20))}})},function(e,t,n){"use strict";e.exports=madxartwork.modules.controls.Select2.extend({cache:null,isTitlesReceived:!1,getSelect2Placeholder:function(){return{id:"",text:madxartworkPro.translate("all")}},getControlValueByName:function(e){var t=this.model.get("group_prefix")+e;return this.elementSettingsModel.attributes[t]},getQueryDataDeprecated:function(){return{filter_type:this.model.get("filter_type"),object_type:this.model.get("object_type"),include_type:this.model.get("include_type"),query:this.model.get("query")}},getQueryData:function(){var e=madxartworkCommon.helpers.cloneObject(this.model.get("autocomplete"));return _.isEmpty(e.query)&&(e.query={}),"cpt_tax"===e.object&&(e.object="tax",(_.isEmpty(e.query)||_.isEmpty(e.query.post_type))&&(e.query.post_type=this.getControlValueByName("post_type"))),{autocomplete:e}},getSelect2DefaultOptions:function(){var e=this;return jQuery.extend(madxartwork.modules.controls.Select2.prototype.getSelect2DefaultOptions.apply(this,arguments),{ajax:{transport:function(t,n,o){var i={},r="panel_posts_control_filter_autocomplete";return!_.isEmpty(e.model.get("filter_type"))?(i=e.getQueryDataDeprecated(),r="panel_posts_control_filter_autocomplete_deprecated"):i=e.getQueryData(),i.q=t.data.q,madxartworkPro.ajax.addRequest(r,{data:i,success:n,error:o})},data:function(e){return{q:e.term,page:e.page}},cache:!0},escapeMarkup:function(e){return e},minimumInputLength:1})},getValueTitles:function(){var e=this,t={},n=!_.isEmpty(this.model.get("filter_type")),o=this.getControlValue(),i="query_control_value_titles",r="autocomplete",l={};n?(r="filter_type",l=this.model.get(r).object,t.filter_type=l,t.object_type=e.model.get("object_type"),t.include_type=e.model.get("include_type"),t.unique_id=""+e.cid+l,i="query_control_value_titles_deprecated"):(l=this.model.get(r).object,t.get_titles=e.getQueryData().autocomplete,t.unique_id=""+e.cid+l),o&&l&&(_.isArray(o)||(o=[o]),madxartworkCommon.ajax.loadObjects({action:i,ids:o,data:t,before:function(){e.addControlSpinner()},success:function(t){e.isTitlesReceived=!0,e.model.set("options",t),e.render()}}))},addControlSpinner:function(){this.ui.select.prop("disabled",!0),this.$el.find(".madxartwork-control-title").after('<span class="madxartwork-control-spinner">&nbsp;<i class="eicon-spinner eicon-animation-spin"></i>&nbsp;</span>')},onReady:function(){setTimeout(madxartwork.modules.controls.Select2.prototype.onReady.bind(this)),this.isTitlesReceived||this.getValueTitles()}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({onmadxartworkInit:function(){var e=n(22),t=n(23),o=n(24),i=n(25),r=n(26),l=n(27),s=n(28),a=n(29),u=n(30);this.replyToField=new e,this.mailchimp=new r("form"),this.shortcode=new o("form"),this.recaptcha=new t("form"),this.drip=new l("form"),this.activecampaign=new s("form"),this.getresponse=new a("form"),this.convertkit=new u("form"),this.mailerlite=new i("form");var d=n(31),c=n(32),p=n(33),m=n(34),g=n(35);this.Fields={time:new d("form"),date:new c("form"),tel:new g("form"),acceptance:new p("form"),upload:new m("form")},madxartwork.addControlView("Fields_map",n(36))}})},function(e,t,n){"use strict";e.exports=function(){var e,t,n,o=function(){var t=e.children.findByModelCid(n.cid);t&&t.render()},i=function(){var e,i=t.get("settings").get("form_fields").where({field_type:"email"});i=_.reject(i,{field_label:""}),e=_.map(i,function(e){return{id:e.get("custom_id"),label:madxartworkPro.translate("x_field",[e.get("field_label")])}}),n.set("options",{"":n.get("options")[""]}),_.each(e,function(e){n.get("options")[e.id]=e.label}),o()},r=function(e){n.get("options")[""]=e.get("email_from"),o()},l=function(e){e.get("custom_id")&&"email"===e.get("field_type")&&i(),e.changed.email_from&&r(e)},s=function(o,s){e=o.getCurrentPageView(),t=s,n=e.collection.findWhere({name:"email_reply_to"});var a=t.get("settings");a.on("change",l),r(a),i()};madxartwork.hooks.addAction("panel/open_editor/widget/form",s)}},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({enqueueRecaptchaJs:function(e,t){madxartworkFrontend.elements.$body.find('[src="'+e+'"]').length||madxartworkFrontend.elements.$body.append('<script src="'+e+'" id="recaptcha-'+t+'"<\/script>')},renderField:function(e,t){return e+='<div class="madxartwork-field '+t.field_type+' ">',e+=this.getDataSettings(t),e+="</div>"},getDataSettings:function(e){var t=madxartworkPro.config.forms[e.field_type];if(!t.enabled)return'<div class="madxartwork-alert madxartwork-alert-info">'+t.setup_message+"</div>";var n='data-sitekey="'+t.site_key+'" data-type="'+t.type+'"';switch(t.type){case"v3":n+=' data-action="form" data-size="invisible" data-badge="'+e.recaptcha_badge+'"';break;case"v2_checkbox":n+=' data-theme="'+e.recaptcha_style+'"',n+=' data-size="'+e.recaptcha_size+'"'}return this.enqueueRecaptchaJs("https://www.google.com/recaptcha/api.js?render=explicit",t.type),'<div class="madxartwork-g-recaptcha'+_.escape(e.css_classes)+'" '+n+"></div>"},filterItem:function(e){return"recaptcha"===e.field_type&&(e.field_label=!1),e},onInit:function(){madxartwork.hooks.addFilter("madxartwork_pro/forms/content_template/item",this.filterItem),madxartwork.hooks.addFilter("madxartwork_pro/forms/content_template/field/recaptcha",this.renderField,10,2),madxartwork.hooks.addFilter("madxartwork_pro/forms/content_template/field/recaptcha_v3",this.renderField,10,2)}})},function(e,t,n){"use strict";var o=n(5);e.exports=o.extend({lastRemovedModelId:!1,collectionEventsAttached:!1,formFieldEvents:{ADD:"add",SORT:"sort",DUPLICATE:"duplicate",CHANGE:"change"},getExistId:function(e){return this.getEditorControlView("form_fields").collection.filter(function(t){return e===t.get("custom_id")}).length>1},getFormFieldsView:function(){return this.getEditorControlView("form_fields")},onFieldUpdate:function(e,t){if(t.add){var n=this.formFieldEvents.ADD,o=t.changes.added[0];t.at&&(n=this.lastRemovedModelId&&o.attributes.custom_id===this.lastRemovedModelId?this.formFieldEvents.SORT:this.formFieldEvents.DUPLICATE,this.lastRemovedModelId=!1),this.updateIdAndShortcode(o,n)}},onFieldChanged:function(e){_.isUndefined(e.changed.custom_id)||this.updateIdAndShortcode(e,this.formFieldEvents.CHANGE)},onFieldRemoved:function(e){this.lastRemovedModelId=e.attributes.custom_id,this.getFormFieldsView().children.each(this.updateShortcode)},updateIdAndShortcode:function(e,t){var n=this,o=this.getFormFieldsView().children.findByModel(e);_.defer(function(){n.updateId(o,t),n.updateShortcode(o)})},getFieldId:function(e,t){if(t===this.formFieldEvents.ADD||t===this.formFieldEvents.DUPLICATE)return e.get("_id");var n=e.get("custom_id");return n||e.get("_id")},updateId:function(e,t){for(var n=this.getFieldId(e.model,t),o=n.replace(/[^\w]/,"_"),i=1,r=t===this.formFieldEvents.ADD||t===this.formFieldEvents.DUPLICATE,l=e.children.filter(function(e){return"custom_id"===e.model.get("name")});o!==n||this.getExistId(n)||r;)o!==n?n=o:(r||this.getExistId(n))&&(o=n="field_"+i),e.model.attributes.custom_id=n,l[0].render(),l[0].$el.find("input").focus(),i++,r=!1},updateShortcode:function(e){var t=_.template('[field id="<%= id %>"]')({title:e.model.get("field_label"),id:e.model.get("custom_id")});e.$el.find(".madxartwork-form-field-shortcode").focus(function(){this.select()}).val(t)},onSectionActive:function(){var e=this.getEditorControlView("form_fields");e.children.each(this.updateShortcode),e.collection.shortcodeEventsAttached||(e.collection.on("change",this.onFieldChanged).on("update",this.onFieldUpdate).on("remove",this.onFieldRemoved),e.collection.shortcodeEventsAttached=!0)},onInit:function(){this.addSectionListener("section_form_fields",this.onSectionActive)}})},function(e,t,n){"use strict";var o=n(1);e.exports=o.extend({fields:{},getName:function(){return"mailerlite"},onElementChange:function(e){switch(e){case"mailerlite_api_key_source":case"mailerlite_custom_api_key":this.onMailerliteApiKeyUpdate();break;case"mailerlite_group":this.updateFieldsMapping()}},onMailerliteApiKeyUpdate:function(){var e=this,t=e.getEditorControlView("mailerlite_custom_api_key"),n=e.getEditorControlView("mailerlite_api_key_source");if("default"!==n.getControlValue()&&""===t.getControlValue())return e.updateOptions("mailerlite_group",[]),void e.getEditorControlView("mailerlite_group").setValue("");e.addControlSpinner("mailerlite_group");var o=this.getCacheKey({type:"groups",controls:[t.getControlValue(),n.getControlValue()]});e.getMailerliteCache("groups","groups",o).done(function(t){e.updateOptions("mailerlite_group",t.groups),e.fields=t.fields})},updateFieldsMapping:function(){if(this.getEditorControlView("mailerlite_group").getControlValue()){var e=[{remote_label:madxartwork.translate("Email"),remote_type:"email",remote_id:"email",remote_required:!0},{remote_label:madxartwork.translate("Name"),remote_type:"text",remote_id:"name",remote_required:!1},{remote_label:madxartwork.translate("Last Name"),remote_type:"text",remote_id:"last_name",remote_required:!1},{remote_label:madxartwork.translate("Company"),remote_type:"text",remote_id:"company",remote_required:!1},{remote_label:madxartwork.translate("Phone"),remote_type:"text",remote_id:"phone",remote_required:!1},{remote_label:madxartwork.translate("Country"),remote_type:"text",remote_id:"country",remote_required:!1},{remote_label:madxartwork.translate("State"),remote_type:"text",remote_id:"state",remote_required:!1},{remote_label:madxartwork.translate("City"),remote_type:"text",remote_id:"city",remote_required:!1},{remote_label:madxartwork.translate("Zip"),remote_type:"text",remote_id:"zip",remote_required:!1}];for(var t in this.fields)this.fields.hasOwnProperty(t)&&e.push(this.fields[t]);this.getEditorControlView("mailerlite_fields_map").updateMap(e)}},getMailerliteCache:function(e,t,n,o){if(_.has(this.cache[e],n)){var i={};return i[e]=this.cache[e][n],jQuery.Deferred().resolve(i)}return o=_.extend({},o,{service:"mailerlite",mailerlite_action:t,custom_api_key:this.getEditorControlView("mailerlite_custom_api_key").getControlValue(),api_key:this.getEditorControlView("mailerlite_api_key_source").getControlValue()}),this.fetchCache(e,n,o)},onSectionActive:function(){o.prototype.onSectionActive.apply(this,arguments),this.onMailerliteApiKeyUpdate()}})},function(e,t,n){"use strict";var o=n(1);e.exports=o.extend({getName:function(){return"mailchimp"},onElementChange:function(e){switch(e){case"mailchimp_api_key_source":case"mailchimp_api_key":this.onApiUpdate();break;case"mailchimp_list":this.onMailchimpListUpdate()}},onApiUpdate:function(){var e=this,t=e.getEditorControlView("mailchimp_api_key"),n=e.getEditorControlView("mailchimp_api_key_source");if("default"!==n.getControlValue()&&""===t.getControlValue())return e.updateOptions("mailchimp_list",[]),void e.getEditorControlView("mailchimp_list").setValue("");e.addControlSpinner("mailchimp_list");var o=this.getCacheKey({type:"lists",controls:[t.getControlValue(),n.getControlValue()]});e.getMailchimpCache("lists","lists",o).done(function(t){e.updateOptions("mailchimp_list",t.lists),e.updatMailchimpList()})},onMailchimpListUpdate:function(){this.updateOptions("mailchimp_groups",[]),this.getEditorControlView("mailchimp_groups").setValue(""),this.updatMailchimpList()},updatMailchimpList:function(){var e=this,t=e.getEditorControlView("mailchimp_list");if(t.getControlValue()){e.addControlSpinner("mailchimp_groups");this.getCacheKey({type:"list_details",controls:[t.getControlValue()]});e.getMailchimpCache("list_details","list_details",t.getControlValue(),{mailchimp_list:t.getControlValue()}).done(function(t){e.updateOptions("mailchimp_groups",t.list_details.groups),e.getEditorControlView("mailchimp_fields_map").updateMap(t.list_details.fields)})}},getMailchimpCache:function(e,t,n,o){if(_.has(this.cache[e],n)){var i={};return i[e]=this.cache[e][n],jQuery.Deferred().resolve(i)}return o=_.extend({},o,{service:"mailchimp",mailchimp_action:t,api_key:this.getEditorControlView("mailchimp_api_key").getControlValue(),use_global_api_key:this.getEditorControlView("mailchimp_api_key_source").getControlValue()}),this.fetchCache(e,n,o)},onSectionActive:function(){o.prototype.onSectionActive.apply(this,arguments),this.onApiUpdate()}})},function(e,t,n){"use strict";var o=n(1);e.exports=o.extend({getName:function(){return"drip"},onElementChange:function(e){switch(e){case"drip_api_token_source":case"drip_custom_api_token":this.onApiUpdate();break;case"drip_account":this.onDripAccountsUpdate()}},onApiUpdate:function(){var e=this,t=e.getEditorControlView("drip_api_token_source"),n=e.getEditorControlView("drip_custom_api_token");if("default"!==t.getControlValue()&&""===n.getControlValue())return e.updateOptions("drip_account",[]),void e.getEditorControlView("drip_account").setValue("");e.addControlSpinner("drip_account");this.getCacheKey({type:"accounts",controls:[t.getControlValue(),n.getControlValue()]});e.getDripCache("accounts","accounts",t.getControlValue()).done(function(t){e.updateOptions("drip_account",t.accounts)})},onDripAccountsUpdate:function(){this.updateFieldsMapping()},updateFieldsMapping:function(){if(this.getEditorControlView("drip_account").getControlValue()){var e={remote_label:madxartwork.translate("Email"),remote_type:"email",remote_id:"email",remote_required:!0};this.getEditorControlView("drip_fields_map").updateMap([e])}},getDripCache:function(e,t,n,o){if(_.has(this.cache[e],n)){var i={};return i[e]=this.cache[e][n],jQuery.Deferred().resolve(i)}return o=_.extend({},o,{service:"drip",drip_action:t,api_token:this.getEditorControlView("drip_api_token_source").getControlValue(),custom_api_token:this.getEditorControlView("drip_custom_api_token").getControlValue()}),this.fetchCache(e,n,o)}})},function(e,t,n){"use strict";var o=n(1);e.exports=o.extend({fields:{},getName:function(){return"activecampaign"},onElementChange:function(e){switch(e){case"activecampaign_api_credentials_source":case"activecampaign_api_key":case"activecampaign_api_url":this.onApiUpdate();break;case"activecampaign_list":this.onListUpdate()}},onApiUpdate:function(){var e=this,t=e.getEditorControlView("activecampaign_api_key"),n=e.getEditorControlView("activecampaign_api_url"),o=e.getEditorControlView("activecampaign_api_credentials_source");if("default"!==o.getControlValue()&&(""===t.getControlValue()||""===n.getControlValue()))return e.updateOptions("activecampaign_list",[]),void e.getEditorControlView("activecampaign_list").setValue("");e.addControlSpinner("activecampaign_list");var i=this.getCacheKey({controls:[o.getControlValue(),n.getControlValue(),t.getControlValue()]});e.getActiveCampaignCache("lists","activecampaign_list",i).done(function(t){e.updateOptions("activecampaign_list",t.lists),e.fields=t.fields})},onListUpdate:function(){this.updateFieldsMapping()},updateFieldsMapping:function(){if(this.getEditorControlView("activecampaign_list").getControlValue()){var e=[{remote_label:madxartwork.translate("Email"),remote_type:"email",remote_id:"email",remote_required:!0},{remote_label:madxartwork.translate("First Name"),remote_type:"text",remote_id:"first_name",remote_required:!1},{remote_label:madxartwork.translate("Last Name"),remote_type:"text",remote_id:"last_name",remote_required:!1},{remote_label:madxartwork.translate("Phone"),remote_type:"text",remote_id:"phone",remote_required:!1},{remote_label:madxartwork.translate("Organization name"),remote_type:"text",remote_id:"orgname",remote_required:!1}];for(var t in this.fields)this.fields.hasOwnProperty(t)&&e.push(this.fields[t]);this.getEditorControlView("activecampaign_fields_map").updateMap(e)}},getActiveCampaignCache:function(e,t,n,o){if(_.has(this.cache[e],n)){var i={};return i[e]=this.cache[e][n],jQuery.Deferred().resolve(i)}return o=_.extend({},o,{service:"activecampaign",activecampaign_action:t,api_key:this.getEditorControlView("activecampaign_api_key").getControlValue(),api_url:this.getEditorControlView("activecampaign_api_url").getControlValue(),api_cred:this.getEditorControlView("activecampaign_api_credentials_source").getControlValue()}),this.fetchCache(e,n,o)}})},function(e,t,n){"use strict";var o=n(1);e.exports=o.extend({getName:function(){return"getresponse"},onElementChange:function(e){switch(e){case"getresponse_custom_api_key":case"getresponse_api_key_source":this.onApiUpdate();break;case"getresponse_list":this.onGetResonseListUpdate()}},onApiUpdate:function(){var e=this,t=e.getEditorControlView("getresponse_api_key_source"),n=e.getEditorControlView("getresponse_custom_api_key");if("default"!==t.getControlValue()&&""===n.getControlValue())return e.updateOptions("getresponse_list",[]),void e.getEditorControlView("getresponse_list").setValue("");e.addControlSpinner("getresponse_list");var o=this.getCacheKey({type:"lists",controls:[t.getControlValue(),n.getControlValue()]});e.getCache("lists","lists",o).done(function(t){e.updateOptions("getresponse_list",t.lists)})},onGetResonseListUpdate:function(){this.updatGetResonseList()},updatGetResonseList:function(){var e=this,t=e.getEditorControlView("getresponse_list");if(t.getControlValue()){e.addControlSpinner("getresponse_fields_map");var n=this.getCacheKey({type:"fields",controls:[t.getControlValue()]});e.getCache("fields","get_fields",n,{getresponse_list:t.getControlValue()}).done(function(t){e.getEditorControlView("getresponse_fields_map").updateMap(t.fields)})}},getCache:function(e,t,n,o){if(_.has(this.cache[e],n)){var i={};return i[e]=this.cache[e][n],jQuery.Deferred().resolve(i)}return o=_.extend({},o,{service:"getresponse",getresponse_action:t,api_key:this.getEditorControlView("getresponse_api_key_source").getControlValue(),custom_api_key:this.getEditorControlView("getresponse_custom_api_key").getControlValue()}),this.fetchCache(e,n,o)},onSectionActive:function(){o.prototype.onSectionActive.apply(this,arguments),this.updatGetResonseList()}})},function(e,t,n){"use strict";var o=n(1);e.exports=o.extend({getName:function(){return"convertkit"},onElementChange:function(e){switch(e){case"convertkit_api_key_source":case"convertkit_custom_api_key":this.onApiUpdate();break;case"convertkit_form":this.onListUpdate()}},onApiUpdate:function(){var e=this,t=e.getEditorControlView("convertkit_api_key_source"),n=e.getEditorControlView("convertkit_custom_api_key");if("default"!==t.getControlValue()&&""===n.getControlValue())return e.updateOptions("convertkit_form",[]),void e.getEditorControlView("convertkit_form").setValue("");e.addControlSpinner("convertkit_form");var o=this.getCacheKey({type:"data",controls:[t.getControlValue(),n.getControlValue()]});e.getConvertKitCache("data","convertkit_get_forms",o).done(function(t){e.updateOptions("convertkit_form",t.data.forms),e.updateOptions("convertkit_tags",t.data.tags)})},onListUpdate:function(){this.updateFieldsMapping()},updateFieldsMapping:function(){if(this.getEditorControlView("convertkit_form").getControlValue()){var e=[{remote_label:madxartwork.translate("Email"),remote_type:"email",remote_id:"email",remote_required:!0},{remote_label:madxartwork.translate("First Name"),remote_type:"text",remote_id:"first_name",remote_required:!1}];this.getEditorControlView("convertkit_fields_map").updateMap(e)}},getConvertKitCache:function(e,t,n,o){if(_.has(this.cache[e],n)){var i={};return i[e]=this.cache[e][n],jQuery.Deferred().resolve(i)}return o=_.extend({},o,{service:"convertkit",convertkit_action:t,api_key:this.getEditorControlView("convertkit_api_key_source").getControlValue(),custom_api_key:this.getEditorControlView("convertkit_custom_api_key").getControlValue()}),this.fetchCache(e,n,o)}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({renderField:function(e,t,n,o){var i=_.escape(t.css_classes),r="",l="";return t.required&&(r="required"),t.placeholder&&(l=' placeholder="'+t.placeholder+'"'),"yes"===t.use_native_time&&(i+=" madxartwork-use-native"),'<input size="1" type="time"'+l+' class="madxartwork-field-textual madxartwork-time-field madxartwork-field madxartwork-size-'+o.input_size+" "+i+'" name="form_field_'+n+'" id="form_field_'+n+'" '+r+" >"},onInit:function(){madxartwork.hooks.addFilter("madxartwork_pro/forms/content_template/field/time",this.renderField,10,4)}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({renderField:function(e,t,n,o){var i=_.escape(t.css_classes),r="",l="",s="",a="";return t.required&&(r="required"),t.min_date&&(l=' min="'+t.min_date+'"'),t.max_date&&(s=' max="'+t.max_date+'"'),t.placeholder&&(a=' placeholder="'+t.placeholder+'"'),"yes"===t.use_native_date&&(i+=" madxartwork-use-native"),'<input size="1"'+l+s+a+' pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}" type="date" class="madxartwork-field-textual madxartwork-date-field madxartwork-field madxartwork-size-'+o.input_size+" "+i+'" name="form_field_'+n+'" id="form_field_'+n+'" '+r+" >"},onInit:function(){madxartwork.hooks.addFilter("madxartwork_pro/forms/content_template/field/date",this.renderField,10,4)}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({renderField:function(e,t,n,o){var i=_.escape(t.css_classes),r="",l="",s="";return t.required&&(r="required"),t.acceptance_text&&(l='<label for="form_field_'+n+'">'+t.acceptance_text+"</label>"),t.checked_by_default&&(s=' checked="checked"'),'<div class="madxartwork-field-subgroup"><span class="madxartwork-field-option"><input size="1" type="checkbox"'+s+' class="madxartwork-acceptance-field madxartwork-field madxartwork-size-'+o.input_size+" "+i+'" name="form_field_'+n+'" id="form_field_'+n+'" '+r+" > "+l+"</span></div>"},onInit:function(){madxartwork.hooks.addFilter("madxartwork_pro/forms/content_template/field/acceptance",this.renderField,10,4)}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({renderField:function(e,t,n,o){var i=_.escape(t.css_classes),r="",l="",s="form_field_";return t.required&&(r="required"),t.allow_multiple_upload&&(l=' multiple="multiple"',s+="[]"),'<input size="1"  type="file" class="madxartwork-file-field madxartwork-field madxartwork-size-'+o.input_size+" "+i+'" name="'+s+'" id="form_field_'+n+'" '+r+l+" >"},onInit:function(){madxartwork.hooks.addFilter("madxartwork_pro/forms/content_template/field/upload",this.renderField,10,4)}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({renderField:function(e,t,n,o){var i=_.escape(t.css_classes),r="",l="";return t.required&&(r="required"),t.placeholder&&(l=' placeholder="'+t.placeholder+'"'),i="madxartwork-field-textual "+i,'<input size="1" type="'+t.field_type+'" class="madxartwork-field-textual madxartwork-field madxartwork-size-'+o.input_size+" "+i+'" name="form_field_'+n+'" id="form_field_'+n+'" '+r+" "+l+' pattern="[0-9()-]" >'},onInit:function(){madxartwork.hooks.addFilter("madxartwork_pro/forms/content_template/field/tel",this.renderField,10,4)}})},function(e,t,n){"use strict";e.exports=madxartwork.modules.controls.Repeater.extend({onBeforeRender:function(){this.$el.hide()},updateMap:function(e){var t=this,n={};t.collection.each(function(e){n[e.get("remote_id")]=e.get("local_id")}),t.collection.reset(),_.each(e,function(e){var o={remote_id:e.remote_id,remote_label:e.remote_label,remote_type:e.remote_type?e.remote_type:"",remote_required:!!e.remote_required&&e.remote_required,local_id:n[e.remote_id]?n[e.remote_id]:""};t.collection.add(o)}),t.render()},onRender:function(){madxartwork.modules.controls.Base.prototype.onRender.apply(this,arguments);var e=this;e.children.each(function(t){var n=t.children.last(),o={"":"- "+madxartwork.translate("None")+" -"},i=t.model.get("remote_label");t.model.get("remote_required")&&(i+='<span class="madxartwork-required">*</span>'),_.each(e.elementSettingsModel.get("form_fields").models,function(e,n){var i=t.model.get("remote_type");"text"!==i&&i!==e.get("field_type")||(o[e.get("custom_id")]=e.get("field_label")||"Field #"+(n+1))}),n.model.set("label",i),n.model.set("options",o),n.render(),t.$el.find(".madxartwork-repeater-row-tools").hide(),t.$el.find(".madxartwork-repeater-row-controls").removeClass("madxartwork-repeater-row-controls").find(".madxartwork-control").css({paddingBottom:0})}),e.$el.find(".madxartwork-button-wrapper").remove(),e.children.length&&e.$el.show()}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({onmadxartworkPreviewLoaded:function(){var e=n(38);this.editButton=new e}})},function(e,t,n){"use strict";e.exports=function(){var e=this;e.onPanelShow=function(t){var n=t.content.currentView.collection.findWhere({name:"template_id"});e.templateIdView=t.content.currentView.children.findByModelCid(n.cid),e.templateIdView.elementSettingsModel.on("change",e.onTemplateIdChange),e.templateIdView.on("render",e.onTemplateIdChange)},e.onTemplateIdChange=function(){var t=e.templateIdView.elementSettingsModel.get("template_id"),n=e.templateIdView.$el.find(".madxartwork-edit-template");if(t){var o=madxartworkConfig.home_url+"?p="+t+"&madxartwork";n.length?n.prop("href",o):(n=jQuery("<a />",{target:"_blank",class:"madxartwork-button madxartwork-button-default madxartwork-edit-template",href:o,html:'<i class="eicon-pencil" /> '+madxartworkPro.config.i18n.edit_template}),e.templateIdView.$el.find(".madxartwork-control-input-wrapper").after(n))}else n.remove()},e.init=function(){madxartwork.hooks.addAction("panel/open_editor/widget/template",e.onPanelShow)},e.init()}},function(e,t,n){"use strict";madxartworkProEditorConfig.useComponentsRouter?e.exports=madxartworkModules.editor.utils.Module.extend({globalModels:{},panelWidgets:null,templatesAreSaved:!0,addGlobalWidget:function(e,t){t=_.extend({},t,{categories:[],icon:madxartwork.config.widgets[t.widgetType].icon,widgetType:t.widgetType,custom:{templateID:e}});var n=this.createGlobalModel(e,t);return this.panelWidgets.add(n)},createGlobalModel:function(e,t){var n=new madxartwork.modules.elements.models.Element(t),o=n.get("settings");return n.set("id",e),o.on("change",_.bind(this.onGlobalModelChange,this)),this.globalModels[e]=n},onGlobalModelChange:function(){this.templatesAreSaved=!1},setWidgetType:function(){madxartwork.hooks.addFilter("element/view",function(e,t){return t.get("templateID")?n(46):e}),madxartwork.hooks.addFilter("element/model",function(e,t){return t.templateID?n(47):e})},registerTemplateType:function(){madxartwork.templates.registerTemplateType("widget",{showInLibrary:!1,saveDialog:{title:madxartworkPro.translate("global_widget_save_title"),description:madxartworkPro.translate("global_widget_save_description")},prepareSavedData:function(e){return e.widgetType=e.content[0].widgetType,e},ajaxParams:{success:this.onWidgetTemplateSaved.bind(this)}})},addSavedWidgetsToPanel:function(){var e=this;e.panelWidgets=new Backbone.Collection,_.each(madxartworkPro.config.widget_templates,function(t,n){e.addGlobalWidget(n,t)}),madxartwork.hooks.addFilter("panel/elements/regionViews",function(t){return _.extend(t.global,{view:n(48),options:{collection:e.panelWidgets}}),t})},addPanelPage:function(){madxartwork.getPanelView().addPage("globalWidget",{view:n(50)})},getGlobalModels:function(e){return e?this.globalModels[e]:this.globalModels},saveTemplates:function(){if(Object.keys(this.globalModels).length){var e=[],t=this;_.each(this.globalModels,function(t,n){if("loaded"===t.get("settingsLoadedStatus")){var o={content:JSON.stringify([t.toJSON({remove:["default"]})]),source:"local",type:"widget",id:n};e.push(o)}}),e.length&&madxartworkCommon.ajax.addRequest("update_templates",{data:{templates:e},success:function(){t.templatesAreSaved=!0}})}},setSaveButton:function(){madxartwork.saver.on("before:save:publish",_.bind(this.saveTemplates,this)),madxartwork.saver.on("before:save:private",_.bind(this.saveTemplates,this))},requestGlobalModelSettings:function(e,t){madxartwork.templates.requestTemplateContent("local",e.get("id"),{success:function(n){e.set("settingsLoadedStatus","loaded").trigger("settings:loaded");var o=n.content[0].settings,i=e.get("settings");madxartwork.history.history.setActive(!1),i.handleRepeaterData(o),i.set(o),t&&t(e),madxartwork.history.history.setActive(!0)}})},setWidgetContextMenuSaveAction:function(){madxartwork.hooks.addFilter("elements/widget/contextMenuGroups",function(e,t){var n=_.findWhere(e,{name:"save"});if(!n)return e;var o=_.findWhere(n.actions,{name:"save"});return o.callback=t.save.bind(t),delete o.shortcut,e})},onmadxartworkInit:function(){this.setWidgetType(),this.registerTemplateType(),this.setWidgetContextMenuSaveAction()},onmadxartworkFrontendInit:function(){this.addSavedWidgetsToPanel()},onmadxartworkPreviewLoaded:function(e){e&&(this.addPanelPage(),this.setSaveButton(),$e.routes.register("panel/editor","global",function(e){madxartwork.getPanelView().setPage("globalWidget","Global Editing",{editedView:e.view})}))},onWidgetTemplateSaved:function(e){madxartwork.history.history.startItem({title:madxartwork.config.widgets[e.widgetType].title,type:madxartworkPro.translate("linked_to_global")});var t=madxartwork.templates.layout.modalContent.currentView.model,n=t.collection.indexOf(t);madxartwork.templates.layout.hideModal(),e.elType=e.type,e.settings=t.get("settings").attributes;var o=this.addGlobalWidget(e.template_id,e).attributes;t.collection.add({id:madxartwork.helpers.getUniqueID(),elType:o.type,templateID:o.template_id,widgetType:"global"},{at:n},!0),t.destroy(),madxartwork.history.history.endItem(),$e.route("panel/elements/global")}}):e.exports=n(40)},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({globalModels:{},panelWidgets:null,templatesAreSaved:!0,addGlobalWidget:function(e,t){t=_.extend({},t,{categories:[],icon:madxartwork.config.widgets[t.widgetType].icon,widgetType:t.widgetType,custom:{templateID:e}});var n=this.createGlobalModel(e,t);return this.panelWidgets.add(n)},createGlobalModel:function(e,t){var n=new madxartwork.modules.elements.models.Element(t),o=n.get("settings");return n.set("id",e),o.on("change",_.bind(this.onGlobalModelChange,this)),this.globalModels[e]=n},onGlobalModelChange:function(){this.templatesAreSaved=!1},setWidgetType:function(){madxartwork.hooks.addFilter("element/view",function(e,t){return t.get("templateID")?n(41):e}),madxartwork.hooks.addFilter("element/model",function(e,t){return t.templateID?n(42):e})},registerTemplateType:function(){madxartwork.templates.registerTemplateType("widget",{showInLibrary:!1,saveDialog:{title:madxartworkPro.translate("global_widget_save_title"),description:madxartworkPro.translate("global_widget_save_description")},prepareSavedData:function(e){return e.widgetType=e.content[0].widgetType,e},ajaxParams:{success:this.onWidgetTemplateSaved.bind(this)}})},addSavedWidgetsToPanel:function(){var e=this;e.panelWidgets=new Backbone.Collection,_.each(madxartworkPro.config.widget_templates,function(t,n){e.addGlobalWidget(n,t)}),madxartwork.hooks.addFilter("panel/elements/regionViews",function(t){return _.extend(t.global,{view:n(43),options:{collection:e.panelWidgets}}),t})},addPanelPage:function(){madxartwork.getPanelView().addPage("globalWidget",{view:n(45)})},getGlobalModels:function(e){return e?this.globalModels[e]:this.globalModels},saveTemplates:function(){if(Object.keys(this.globalModels).length){var e=[],t=this;_.each(this.globalModels,function(t,n){if("loaded"===t.get("settingsLoadedStatus")){var o={content:JSON.stringify([t.toJSON({remove:["default"]})]),source:"local",type:"widget",id:n};e.push(o)}}),e.length&&madxartworkCommon.ajax.addRequest("update_templates",{data:{templates:e},success:function(){t.templatesAreSaved=!0}})}},setSaveButton:function(){madxartwork.saver.on("before:save:publish",_.bind(this.saveTemplates,this)),madxartwork.saver.on("before:save:private",_.bind(this.saveTemplates,this))},requestGlobalModelSettings:function(e,t){madxartwork.templates.requestTemplateContent("local",e.get("id"),{success:function(n){e.set("settingsLoadedStatus","loaded").trigger("settings:loaded");var o=n.content[0].settings,i=e.get("settings");madxartwork.history.history.setActive(!1),i.handleRepeaterData(o),i.set(o),t&&t(e),madxartwork.history.history.setActive(!0)}})},setWidgetContextMenuSaveAction:function(){madxartwork.hooks.addFilter("elements/widget/contextMenuGroups",function(e,t){var n=_.findWhere(e,{name:"save"}),o=_.findWhere(n.actions,{name:"save"});return o.callback=t.save.bind(t),delete o.shortcut,e})},onmadxartworkInit:function(){this.setWidgetType(),this.registerTemplateType(),this.setWidgetContextMenuSaveAction()},onmadxartworkFrontendInit:function(){this.addSavedWidgetsToPanel()},onmadxartworkPreviewLoaded:function(){this.addPanelPage(),this.setSaveButton()},onWidgetTemplateSaved:function(e){madxartwork.history.history.startItem({title:madxartwork.config.widgets[e.widgetType].title,type:madxartworkPro.translate("linked_to_global")});var t=madxartwork.templates.getLayout().modalContent.currentView.model,n=t.collection.indexOf(t);madxartwork.templates.closeModal(),e.elType=e.type,e.settings=t.get("settings").attributes;var o=this.addGlobalWidget(e.template_id,e).attributes;t.collection.add({id:madxartwork.helpers.getUniqueID(),elType:o.type,templateID:o.template_id,widgetType:"global"},{at:n},!0),t.destroy();var i=madxartwork.getPanelView();i.setPage("elements"),i.getCurrentPageView().activateTab("global"),madxartwork.history.history.endItem()}})},function(e,t,n){"use strict";var o,i=madxartwork.modules.elements.views.Widget;o=i.extend({globalModel:null,className:function(){return i.prototype.className.apply(this,arguments)+" madxartwork-global-widget madxartwork-global-"+this.model.get("templateID")},initialize:function(){var e=this,t=e.model.get("previewSettings"),n=e.getGlobalModel();if(t){n.set("settingsLoadedStatus","loaded").trigger("settings:loaded");var o=n.get("settings");o.handleRepeaterData(t),o.set(t,{silent:!0})}else{var r=n.get("settingsLoadedStatus");r||(n.set("settingsLoadedStatus","pending"),madxartworkPro.modules.globalWidget.requestGlobalModelSettings(n)),"loaded"!==r&&e.$el.addClass("madxartwork-loading"),n.on("settings:loaded",function(){e.$el.removeClass("madxartwork-loading"),e.render()})}i.prototype.initialize.apply(e,arguments)},getGlobalModel:function(){return this.globalModel||(this.globalModel=madxartworkPro.modules.globalWidget.getGlobalModels(this.model.get("templateID"))),this.globalModel},getEditModel:function(){return this.getGlobalModel()},getHTMLContent:function(e){return"loaded"===this.getGlobalModel().get("settingsLoadedStatus")?i.prototype.getHTMLContent.call(this,e):""},serializeModel:function(){var e=this.getGlobalModel();return e.toJSON.apply(e,_.rest(arguments))},edit:function(){madxartwork.getPanelView().setPage("globalWidget","Global Editing",{editedView:this})},unlink:function(){var e=this.getGlobalModel();madxartwork.history.history.startItem({title:e.getTitle(),type:madxartworkPro.translate("unlink_widget")});var t=new madxartwork.modules.elements.models.Element({elType:"widget",widgetType:e.get("widgetType"),id:madxartwork.helpers.getUniqueID(),settings:madxartwork.helpers.cloneObject(e.get("settings").attributes),defaultEditSettings:madxartwork.helpers.cloneObject(e.get("editSettings").attributes)});this._parent.addChildModel(t,{at:this.model.collection.indexOf(this.model)});var n=this._parent.children.findByModelCid(t.cid);this.model.destroy(),madxartwork.history.history.endItem(),n.edit&&n.edit(),t.trigger("request:edit")},onEditRequest:function(){madxartwork.getPanelView().setPage("globalWidget","Global Editing",{editedView:this})}}),e.exports=o},function(e,t,n){"use strict";e.exports=madxartwork.modules.elements.models.Element.extend({initialize:function(){this.set({widgetType:"global"},{silent:!0}),madxartwork.modules.elements.models.Element.prototype.initialize.apply(this,arguments),madxartworkFrontend.config.elements.data[this.cid].on("change",this.onSettingsChange.bind(this))},initSettings:function(){var e=this.getGlobalModel(),t=e.get("settings");this.set("settings",t),madxartworkFrontend.config.elements.data[this.cid]=t,madxartworkFrontend.config.elements.editSettings[this.cid]=e.get("editSettings")},initEditSettings:function(){},getGlobalModel:function(){var e=this.get("templateID");return madxartworkPro.modules.globalWidget.getGlobalModels(e)},getTitle:function(){var e=this.getSetting("_title");e||(e=this.getGlobalModel().get("title"));var t=madxartworkPro.translate("global");return(e=e.replace(new RegExp("\\("+t+"\\)$"),""))+" ("+t+")"},getIcon:function(){return this.getGlobalModel().getIcon()},onSettingsChange:function(e){e.changed.elements||this.set("previewSettings",e.toJSON({remove:["default"]}),{silent:!0})},onDestroy:function(){var e=madxartwork.getPanelView(),t=e.getCurrentPageName();-1!==["editor","globalWidget"].indexOf(t)&&e.setPage("elements")}})},function(e,t,n){"use strict";e.exports=madxartwork.modules.layouts.panel.pages.elements.views.Elements.extend({id:"madxartwork-global-templates",getEmptyView:function(){return this.collection.length?null:n(44)},onFilterEmpty:function(){}})},function(e,t,n){"use strict";var o=madxartwork.modules.layouts.panel.pages.elements.views.Global;e.exports=o.extend({template:"#tmpl-madxartwork-panel-global-widget-no-templates",id:"madxartwork-panel-global-widget-no-templates",className:"madxartwork-nerd-box madxartwork-panel-nerd-box"})},function(e,t,n){"use strict";e.exports=Marionette.ItemView.extend({id:"madxartwork-panel-global-widget",template:"#tmpl-madxartwork-panel-global-widget",ui:{editButton:"#madxartwork-global-widget-locked-edit .madxartwork-button",unlinkButton:"#madxartwork-global-widget-locked-unlink .madxartwork-button",loading:"#madxartwork-global-widget-loading"},events:{"click @ui.editButton":"onEditButtonClick","click @ui.unlinkButton":"onUnlinkButtonClick"},initialize:function(){this.initUnlinkDialog()},buildUnlinkDialog:function(){var e=this;return madxartworkCommon.dialogsManager.createWidget("confirm",{id:"madxartwork-global-widget-unlink-dialog",headerMessage:madxartworkPro.translate("unlink_widget"),message:madxartworkPro.translate("dialog_confirm_unlink"),position:{my:"center center",at:"center center"},strings:{confirm:madxartworkPro.translate("unlink"),cancel:madxartworkPro.translate("cancel")},onConfirm:function(){e.getOption("editedView").unlink()}})},initUnlinkDialog:function(){var e;this.getUnlinkDialog=function(){return e||(e=this.buildUnlinkDialog()),e}},editGlobalModel:function(){var e=this.getOption("editedView");madxartwork.getPanelView().openEditor(e.getEditModel(),e)},onEditButtonClick:function(){var e=this,t=e.getOption("editedView").getEditModel();"loaded"!==t.get("settingsLoadedStatus")?(e.ui.loading.removeClass("madxartwork-hidden"),madxartworkPro.modules.globalWidget.requestGlobalModelSettings(t,function(){e.ui.loading.addClass("madxartwork-hidden"),e.editGlobalModel()})):e.editGlobalModel()},onUnlinkButtonClick:function(){this.getUnlinkDialog().show()}})},function(e,t,n){"use strict";var o,i=madxartwork.modules.elements.views.Widget;o=i.extend({globalModel:null,className:function(){return i.prototype.className.apply(this,arguments)+" madxartwork-global-widget madxartwork-global-"+this.model.get("templateID")},initialize:function(){var e=this,t=e.model.get("previewSettings"),n=e.getGlobalModel();if(t){n.set("settingsLoadedStatus","loaded").trigger("settings:loaded");var o=n.get("settings");o.handleRepeaterData(t),o.set(t,{silent:!0})}else{var r=n.get("settingsLoadedStatus");r||(n.set("settingsLoadedStatus","pending"),madxartworkPro.modules.globalWidget.requestGlobalModelSettings(n)),"loaded"!==r&&e.$el.addClass("madxartwork-loading"),n.on("settings:loaded",function(){e.$el.removeClass("madxartwork-loading"),e.render()})}i.prototype.initialize.apply(e,arguments)},getGlobalModel:function(){return this.globalModel||(this.globalModel=madxartworkPro.modules.globalWidget.getGlobalModels(this.model.get("templateID"))),this.globalModel},getEditModel:function(){return this.getGlobalModel()},getHTMLContent:function(e){return"loaded"===this.getGlobalModel().get("settingsLoadedStatus")?i.prototype.getHTMLContent.call(this,e):""},serializeModel:function(){var e=this.getGlobalModel();return e.toJSON.apply(e,_.rest(arguments))},edit:function(){$e.route("panel/editor/global",{view:this})},unlink:function(){var e=this.getGlobalModel();madxartwork.history.history.startItem({title:e.getTitle(),type:madxartworkPro.translate("unlink_widget")});var t=new madxartwork.modules.elements.models.Element({elType:"widget",widgetType:e.get("widgetType"),id:madxartwork.helpers.getUniqueID(),settings:madxartwork.helpers.cloneObject(e.get("settings").attributes),defaultEditSettings:madxartwork.helpers.cloneObject(e.get("editSettings").attributes)});this._parent.addChildModel(t,{at:this.model.collection.indexOf(this.model)});var n=this._parent.children.findByModelCid(t.cid);this.model.destroy(),madxartwork.history.history.endItem(),n.edit&&n.edit(),t.trigger("request:edit")},onEditRequest:function(){this.edit()}}),e.exports=o},function(e,t,n){"use strict";e.exports=madxartwork.modules.elements.models.Element.extend({initialize:function(){this.set({widgetType:"global"},{silent:!0}),madxartwork.modules.elements.models.Element.prototype.initialize.apply(this,arguments),madxartworkFrontend.config.elements.data[this.cid].on("change",this.onSettingsChange.bind(this))},initSettings:function(){var e=this.getGlobalModel(),t=e.get("settings");this.set("settings",t),madxartworkFrontend.config.elements.data[this.cid]=t,madxartworkFrontend.config.elements.editSettings[this.cid]=e.get("editSettings")},initEditSettings:function(){},getGlobalModel:function(){var e=this.get("templateID");return madxartworkPro.modules.globalWidget.getGlobalModels(e)},getTitle:function(){var e=this.getSetting("_title");e||(e=this.getGlobalModel().get("title"));var t=madxartworkPro.translate("global");return(e=e.replace(new RegExp("\\("+t+"\\)$"),""))+" ("+t+")"},getIcon:function(){return this.getGlobalModel().getIcon()},onSettingsChange:function(e){e.changed.elements||this.set("previewSettings",e.toJSON({remove:["default"]}),{silent:!0})},onDestroy:function(){$e.routes.isPartOf("panel/editor")&&$e.route("panel/elements/categories")}})},function(e,t,n){"use strict";e.exports=madxartwork.modules.layouts.panel.pages.elements.views.Elements.extend({id:"madxartwork-global-templates",getEmptyView:function(){return this.collection.length?null:n(49)},onFilterEmpty:function(){}})},function(e,t,n){"use strict";var o=madxartwork.modules.layouts.panel.pages.elements.views.Global;e.exports=o.extend({template:"#tmpl-madxartwork-panel-global-widget-no-templates",id:"madxartwork-panel-global-widget-no-templates",className:"madxartwork-nerd-box madxartwork-panel-nerd-box"})},function(e,t,n){"use strict";e.exports=Marionette.ItemView.extend({id:"madxartwork-panel-global-widget",template:"#tmpl-madxartwork-panel-global-widget",ui:{editButton:"#madxartwork-global-widget-locked-edit .madxartwork-button",unlinkButton:"#madxartwork-global-widget-locked-unlink .madxartwork-button",loading:"#madxartwork-global-widget-loading"},events:{"click @ui.editButton":"onEditButtonClick","click @ui.unlinkButton":"onUnlinkButtonClick"},initialize:function(){this.initUnlinkDialog()},buildUnlinkDialog:function(){var e=this;return madxartworkCommon.dialogsManager.createWidget("confirm",{id:"madxartwork-global-widget-unlink-dialog",headerMessage:madxartworkPro.translate("unlink_widget"),message:madxartworkPro.translate("dialog_confirm_unlink"),position:{my:"center center",at:"center center"},strings:{confirm:madxartworkPro.translate("unlink"),cancel:madxartworkPro.translate("cancel")},onConfirm:function(){e.getOption("editedView").unlink()}})},initUnlinkDialog:function(){var e;this.getUnlinkDialog=function(){return e||(e=this.buildUnlinkDialog()),e}},editGlobalModel:function(){var e=this.getOption("editedView");$e.run("panel/editor/open",{model:e.getEditModel(),view:e})},onEditButtonClick:function(){var e=this,t=e.getOption("editedView").getEditModel();"loaded"!==t.get("settingsLoadedStatus")?(e.ui.loading.removeClass("madxartwork-hidden"),madxartworkPro.modules.globalWidget.requestGlobalModelSettings(t,function(){e.ui.loading.addClass("madxartwork-hidden"),e.editGlobalModel()})):e.editGlobalModel()},onUnlinkButtonClick:function(){this.getUnlinkDialog().show()}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({onmadxartworkInit:function(){madxartwork.channels.editor.on("section:activated",this.onSectionActivated)},onSectionActivated:function(e,t){var n=t.getOption("editedElementView");if("flip-box"===n.model.get("widgetType")){var o=-1!==["section_side_b_content","section_style_b"].indexOf(e);n.$el.toggleClass("madxartwork-flip-box--flipped",o);var i=n.$el.find(".madxartwork-flip-box__back");o&&i.css("transition","none"),o||setTimeout(function(){i.css("transition","")},10)}}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({config:madxartworkPro.config.shareButtonsNetworks,networksClassDictionary:{google:"fa fab fa-google-plus",pocket:"fa fab fa-get-pocket",email:"fa fas fa-envelope"},getNetworkClass:function(e){return this.networksClassDictionary[e]||"fa fab fa-"+e},getNetworkTitle:function(e){return e.text||this.config[e.button].title},hasCounter:function(e,t){return"icon"!==t.view&&"yes"===t.show_counter&&this.config[e].has_counter}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({onmadxartworkInit:function(){var e=n(54);this.assets={font:new e}}})},function(e,t,n){"use strict";e.exports=madxartworkModules.Module.extend({_enqueuedFonts:[],_enqueuedTypekit:!1,onFontChange:function(e,t){"custom"!==e&&"typekit"!==e||-1===this._enqueuedFonts.indexOf(t)&&("typekit"===e&&this._enqueuedTypekit||this.getCustomFont(e,t))},getCustomFont:function(e,t){madxartworkPro.ajax.addRequest("assets_manager_panel_action_data",{unique_id:"font_"+e+t,data:{service:"font",type:e,font:t},success:function(e){e.font_face&&madxartwork.$previewContents.find("style:last").after('<style type="text/css">'+e.font_face+"</style>"),e.font_url&&madxartwork.$previewContents.find("link:last").after('<link href="'+e.font_url+'" rel="stylesheet" type="text/css">')}}),this._enqueuedFonts.push(t),"typekit"===e&&(this._enqueuedTypekit=!0)},onInit:function(){madxartwork.channels.editor.on("font:insertion",this.onFontChange.bind(this))}})},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.utils.Module.extend({onmadxartworkPreviewLoaded:function(){var e=n(56);this.commentsSkin=new e}})},function(e,t,n){"use strict";e.exports=function(){var e=this;e.onPanelShow=function(e,t){var n=t.get("settings");n.controls._skin.default||n.set("_skin","theme_comments")},e.init=function(){madxartwork.hooks.addAction("panel/open_editor/widget/post-comments",e.onPanelShow)},e.init()}},function(e,t,n){"use strict";if(madxartworkProEditorConfig.useComponentsRouter){var o=n(64);e.exports=madxartworkModules.editor.utils.Module.extend({onmadxartworkInit:function(){madxartworkPro.config.theme_builder&&(madxartwork.channels.editor.on("page_settings:preview_settings:activated",this.onSectionPreviewSettingsActive),madxartwork.addControlView("Conditions_repeater",n(7)),madxartwork.hooks.addFilter("panel/footer/behaviors",this.addFooterBehavior),madxartwork.saver.on("save",this.onEditorSave),this.setConditionsModel(),this.component=$e.components.register(new o.default({manager:this})))},addFooterBehavior:function(e){return e.saver={behaviorClass:n(67)},e},saveAndReload:function(){madxartwork.saver.saveAutoSave({onSuccess:function(){madxartwork.dynamicTags.cleanCache(),madxartwork.reloadPreview()}})},onApplyPreview:function(){this.saveAndReload()},onSectionPreviewSettingsActive:function(){this.updatePreviewIdOptions(!0)},onPageSettingsChange:function(e){e.changed.preview_type&&(e.set({preview_id:"",preview_search_term:""}),$e.routes.is("panel/page-settings/settings")&&this.updatePreviewIdOptions(!0)),_.isUndefined(e.changed.page_template)||madxartwork.saver.saveAutoSave({onSuccess:function(){madxartwork.reloadPreview(),madxartwork.once("preview:loaded",function(){$e.route("panel/page-settings/settings")})}})},updatePreviewIdOptions:function(e){var t=madxartwork.settings.page.model.get("preview_type");if(t){t=t.split("/");var n=madxartwork.getPanelView().getCurrentPageView(),o=n.collection.findWhere({name:"preview_id"});if("author"===t[1]?o.set({autocomplete:{object:"author"}}):"taxonomy"===t[0]?o.set({autocomplete:{object:"tax",query:{taxonomy:t[1]}}}):"single"===t[0]?o.set({autocomplete:{object:"post",query:{post_type:t[1]}}}):o.set({autocomplete:{object:""}}),!0===e){var i=n.children.findByModel(o);i.render(),i.$el.toggle(!!o.get("autocomplete").object)}}},onmadxartworkPreviewLoaded:function(){madxartworkPro.config.theme_builder&&(madxartwork.getPanelView().on("set:page:page_settings",this.updatePreviewIdOptions),madxartwork.settings.page.model.on("change",this.onPageSettingsChange.bind(this)),madxartwork.channels.editor.on("madxartworkThemeBuilder:ApplyPreview",this.onApplyPreview.bind(this)),setTimeout(function(){madxartwork.$previewContents.find("html, body").animate({scrollTop:madxartwork.$previewContents.find("#madxartwork").offset().top-madxartwork.$preview[0].contentWindow.innerHeight/2})},500))},setConditionsModel:function(){var e=madxartworkPro.config.theme_builder,t=e.settings;this.conditionsModel=new madxartworkModules.editor.elements.models.BaseSettings(t,{controls:e.template_conditions.controls})},onEditorSave:function(){var e=this;this.conditionsModel&&madxartworkPro.ajax.addRequest("theme_builder_save_conditions",{data:this.conditionsModel.toJSON({remove:["default"]}),success:function(){madxartworkPro.config.theme_builder.settings.conditions=e.conditionsModel.get("conditions")}})}})}else e.exports=n(58)},function(e,t,n){"use strict";var o=r(n(59)),i=r(n(6));function r(e){return e&&e.__esModule?e:{default:e}}e.exports=madxartworkModules.editor.utils.Module.extend({onmadxartworkInit:function(){madxartworkPro.config.theme_builder&&(madxartwork.channels.editor.on("page_settings:preview_settings:activated",this.onSectionPreviewSettingsActive),madxartwork.addControlView("Conditions_repeater",n(7)),madxartwork.hooks.addFilter("panel/footer/behaviors",this.addFooterBehavior),madxartwork.saver.on("save",this.onEditorSave),this.initPublishLayout())},addFooterBehavior:function(e){return e.saver={behaviorClass:n(63)},e},saveAndReload:function(){madxartwork.saver.saveAutoSave({onSuccess:function(){madxartwork.dynamicTags.cleanCache(),madxartwork.reloadPreview()}})},onApplyPreview:function(){this.saveAndReload()},onSectionPreviewSettingsActive:function(){this.updatePreviewIdOptions(!0)},onPageSettingsChange:function(e){e.changed.preview_type&&(e.set({preview_id:"",preview_search_term:""}),"page_settings"===madxartwork.getPanelView().getCurrentPageName()&&this.updatePreviewIdOptions(!0)),_.isUndefined(e.changed.page_template)||madxartwork.saver.saveAutoSave({onSuccess:function(){madxartwork.reloadPreview(),madxartwork.once("preview:loaded",function(){madxartwork.getPanelView().setPage("page_settings")})}})},updatePreviewIdOptions:function(e){var t=madxartwork.settings.page.model.get("preview_type");if(t){t=t.split("/");var n=madxartwork.getPanelView().getCurrentPageView(),o=n.collection.findWhere({name:"preview_id"});if("author"===t[1]?o.set({autocomplete:{object:"author"}}):"taxonomy"===t[0]?o.set({autocomplete:{object:"tax",query:{taxonomy:t[1]}}}):"single"===t[0]?o.set({autocomplete:{object:"post",query:{post_type:t[1]}}}):o.set({autocomplete:{object:""}}),!0===e){var i=n.children.findByModel(o);i.render(),i.$el.toggle(!!o.get("autocomplete").object)}}},onmadxartworkPreviewLoaded:function(){madxartworkPro.config.theme_builder&&(madxartwork.getPanelView().on("set:page:page_settings",this.updatePreviewIdOptions),madxartwork.settings.page.model.on("change",this.onPageSettingsChange.bind(this)),madxartwork.channels.editor.on("madxartworkThemeBuilder:ApplyPreview",this.onApplyPreview.bind(this)),setTimeout(function(){madxartwork.$previewContents.find("html, body").animate({scrollTop:madxartwork.$previewContents.find("#madxartwork").offset().top-madxartwork.$preview[0].contentWindow.innerHeight/2})},500))},showPublishModal:function(){this.getPublishLayout().showModal()},initPublishLayout:function(){var e=this,t=void 0;this.getPublishLayout=function(){return t||(t=new o.default,e.trigger("publish-layout:init",t)),t},this.on("publish-layout:init",this.addConditionsScreen)},addConditionsScreen:function(e){var t=madxartworkPro.config.theme_builder,n=t.settings;this.conditionsModel=new madxartworkModules.editor.elements.models.BaseSettings(n,{controls:t.template_conditions.controls}),e.addScreen({View:i.default,viewOptions:{model:this.conditionsModel,controls:this.conditionsModel.controls},name:"conditions",title:madxartworkPro.translate("conditions"),description:madxartworkPro.translate("conditions_publish_screen_description"),image:madxartworkPro.config.urls.modules+"theme-builder/assets/images/conditions-tab.svg"})},onEditorSave:function(){var e=this;this.conditionsModel&&madxartworkPro.ajax.addRequest("theme_builder_save_conditions",{data:this.conditionsModel.toJSON({remove:["default"]}),success:function(){madxartworkPro.config.theme_builder.settings.conditions=e.conditionsModel.get("conditions")}})}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(o):void 0},r=function(e){return e&&e.__esModule?e:{default:e}}(n(60));var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,madxartworkModules.common.views.modal.Layout),o(t,[{key:"initialize",value:function(){for(var e,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];(e=i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this)).call.apply(e,[this].concat(o)),this.screens=[]}},{key:"getModalOptions",value:function(){return{id:"madxartwork-publish__modal",hide:{onButtonClick:!1}}}},{key:"getLogoOptions",value:function(){return{title:madxartworkPro.translate("publish_settings")}}},{key:"initModal",value:function(){var e=this;i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initModal",this).call(this),this.modal.addButton({name:"publish",text:madxartworkPro.translate("save_and_close"),callback:function(){return e.onPublishButtonClick()}}),this.modal.addButton({name:"next",text:madxartworkPro.translate("next"),callback:function(){return e.onNextButtonClick()}});var n=this.modal.getElements("publish");this.modal.getElements("next").addClass("madxartwork-button-success").add(n).addClass("madxartwork-button").removeClass("dialog-button")}},{key:"addScreen",value:function(e,t){var n=void 0!==t?t:this.screens.length;this.screens.splice(n,0,e)}},{key:"showModal",value:function(){this.layoutInitialized||(this.showLogo(),this.showContentView(),this.layoutInitialized=!0),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"showModal",this).call(this)}},{key:"showContentView",value:function(){var e=this,t=new r.default({screens:this.screens});t.on("screen:change",function(t){return e.onContentViewScreenChange(t)}),this.modalContent.show(t)}},{key:"onNextButtonClick",value:function(){var e=this.screens.indexOf(this.modalContent.currentView.currentScreen);this.modalContent.currentView.showScreenByIndex(e+1)}},{key:"onPublishButtonClick",value:function(){madxartwork.saver.defaultSave(),this.hideModal()}},{key:"onContentViewScreenChange",value:function(e){var t=this.screens.indexOf(e)===this.screens.length-1;this.modal.getElements("next").toggle(!t),this.modal.getElements("publish").toggleClass("madxartwork-button-success",t)}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Marionette.LayoutView),o(t,[{key:"id",value:function(){return"madxartwork-publish"}},{key:"getTemplate",value:function(){return Marionette.TemplateCache.get("#tmpl-madxartwork-publish")}},{key:"ui",value:function(){return{tabs:".madxartwork-publish__tab"}}},{key:"events",value:function(){return{"click @ui.tabs":"onTabClick"}}},{key:"regions",value:function(){return{screen:"#madxartwork-publish__screen"}}},{key:"templateHelpers",value:function(){return{screens:this.screens}}},{key:"initialize",value:function(){this.screens=this.getOption("screens")}},{key:"showScreenByName",value:function(e){var t=_.findWhere(this.screens,{name:e});this.showScreen(t)}},{key:"showScreenByIndex",value:function(e){this.showScreen(this.screens[e])}},{key:"showScreen",value:function(e){this.screen.show(new e.View(e.viewOptions)),this.ui.tabs.length&&(this.$currentTab&&this.$currentTab.removeClass("madxartwork-active"),this.$currentTab=this.ui.tabs.filter('[data-screen="'+e.name+'"]'),this.$currentTab.addClass("madxartwork-active")),this.currentScreen=e,this.trigger("screen:change",e)}},{key:"onRender",value:function(){this.showScreenByIndex(0)}},{key:"onTabClick",value:function(e){this.showScreenByName(e.currentTarget.dataset.screen)}}]),t}();t.default=i},function(e,t,n){"use strict";e.exports=madxartworkModules.editor.views.ControlsStack.extend({activeTab:"content",activeSection:"settings",initialize:function(){this.collection=new Backbone.Collection(_.values(this.options.controls))},filter:function(e){if("section"===e.get("type"))return!0;var t=e.get("section");return!t||t===this.activeSection},childViewOptions:function(){return{elementSettingsModel:this.model}}})},function(e,t,n){"use strict";e.exports=madxartwork.modules.controls.RepeaterRow.extend({template:"#tmpl-madxartwork-theme-builder-conditions-repeater-row",childViewContainer:".madxartwork-theme-builder-conditions-repeater-row-controls",id:function(){return"madxartwork-condition-id-"+this.model.get("_id")},onBeforeRender:function(){var e=this.collection.findWhere({name:"sub_name"}),t=this.collection.findWhere({name:"sub_id"}),n=this.config.conditions[this.model.attributes.sub_name];e.attributes.groups=this.getOptions(),n&&n.controls&&_(n.controls).each(function(e){t.set(e),t.set("name","sub_id")})},initialize:function(){madxartwork.modules.controls.RepeaterRow.prototype.initialize.apply(this,arguments),this.config=madxartworkPro.config.theme_builder},updateOptions:function(){(this.model.changed.name&&this.model.set({sub_name:"",sub_id:""}),this.model.changed.name||this.model.changed.sub_name)&&(this.model.set("sub_id","",{silent:!0}),this.collection.findWhere({name:"sub_id"}).set({type:"select",options:{"":"All"}}),this.render());this.model.changed.type&&this.setTypeAttribute()},getOptions:function(){var e=this,t=e.config.conditions[this.model.get("name")];if(t){var n={"":t.all_label};return _(t.sub_conditions).each(function(t,o){var i,r=e.config.conditions[t];r&&(r.sub_conditions.length?((i={label:r.label,options:{}}).options[t]=r.all_label,_(r.sub_conditions).each(function(t){i.options[t]=e.config.conditions[t].label}),n["key"+o]=i):n[t]=r.label)}),n}},setTypeAttribute:function(){var e=this.children.findByModel(this.collection.findWhere({name:"type"}));e.$el.attr("data-madxartwork-condition-type",e.getControlValue())},onRender:function(){var e=this.collection.findWhere({name:"name"}),t=this.collection.findWhere({name:"sub_name"}),n=this.collection.findWhere({name:"sub_id"}),o=this.children.findByModel(e),i=this.children.findByModel(t),r=this.children.findByModel(n),l=this.config.conditions[this.model.attributes.name],s=this.config.conditions[this.model.attributes.sub_name],a=this.config.types[this.config.settings.template_type];a.condition_type!==o.getControlValue()||"general"===o.getControlValue()||_.isEmpty(l.sub_conditions)||o.$el.hide(),(!l||_.isEmpty(l.sub_conditions)&&_.isEmpty(l.controls)||!o.getControlValue()||"general"===o.getControlValue())&&i.$el.hide(),s&&!_.isEmpty(s.controls)&&i.getControlValue()||r.$el.hide(),"singular"===a.condition_type&&""===i.getControlValue()&&i.setValue("post"),this.setTypeAttribute()},onModelChange:function(){madxartwork.modules.controls.RepeaterRow.prototype.onModelChange.apply(this,arguments),this.updateOptions()}})},function(e,t,n){"use strict";var o=madxartwork.modules.components.saver.behaviors.FooterSaver;e.exports=o.extend({ui:function(){var e=o.prototype.ui.apply(this,arguments);return e.menuConditions="#madxartwork-panel-footer-sub-menu-item-conditions",e.buttonPreviewSettings="#madxartwork-panel-footer-theme-builder-button-preview-settings",e.buttonOpenPreview="#madxartwork-panel-footer-theme-builder-button-open-preview",e},events:function(){var e=o.prototype.events.apply(this,arguments);return delete e["click @ui.buttonPreview"],e["click @ui.buttonPreviewSettings"]="onClickButtonPreviewSettings",e["click @ui.buttonOpenPreview"]="onClickButtonPreview",e},initialize:function(){o.prototype.initialize.apply(this,arguments),madxartwork.settings.page.model.on("change",this.onChangeLocation.bind(this))},toggleMenuConditions:function(){this.ui.menuConditions.toggle(!!madxartworkPro.config.theme_builder.settings.location)},onRender:function(){o.prototype.onRender.apply(this,arguments),this.ui.menuConditions=this.view.addSubMenuItem("saver-options",{before:"save-template",name:"conditions",icon:"eicon-flow",title:madxartworkPro.translate("display_conditions"),callback:function(){return madxartworkPro.modules.themeBuilder.showPublishModal()}}),this.toggleMenuConditions(),this.ui.buttonPreview.tipsy("disable").html(jQuery("#tmpl-madxartwork-theme-builder-button-preview").html()).addClass("madxartwork-panel-footer-theme-builder-buttons-wrapper madxartwork-toggle-state")},onChangeLocation:function(e){_.isUndefined(e.changed.location)||(madxartworkPro.config.theme_builder.settings.location=e.changed.location,this.toggleMenuConditions())},onClickButtonPublish:function(){var e=madxartworkPro.config.theme_builder.settings.conditions.length,t=madxartworkPro.config.theme_builder.settings.location,n="draft"===madxartwork.settings.page.model.get("post_status");e&&!n||!t?o.prototype.onClickButtonPublish.apply(this,arguments):madxartworkPro.modules.themeBuilder.showPublishModal()},onClickButtonPreviewSettings:function(){var e=madxartwork.getPanelView();e.setPage("page_settings"),e.getCurrentPageView().activateSection("preview_settings"),e.getCurrentPageView()._renderChildren()}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(o):void 0},r=a(n(65)),l=a(n(66)),s=a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,madxartworkModules.common.ComponentModal),o(t,[{key:"getNamespace",value:function(){return"theme-builder-publish"}},{key:"getModalLayout",value:function(){return l.default}},{key:"defaultTabs",value:function(){return{conditions:{title:madxartworkPro.translate("conditions"),View:s.default,viewOptions:{model:this.manager.conditionsModel,controls:this.manager.conditionsModel.controls},name:"conditions",description:madxartworkPro.translate("conditions_publish_screen_description"),image:madxartworkPro.config.urls.modules+"theme-builder/assets/images/conditions-tab.svg"}}}},{key:"defaultCommands",value:function(){var e=this;return{next:function(){var t=Object.keys(e.tabs)[e.currentTabIndex+1];t&&$e.route(e.getTabRoute(t))},save:function(){madxartwork.saver.defaultSave(),e.layout.hideModal()}}}},{key:"getTabsWrapperSelector",value:function(){return"#madxartwork-publish__tabs"}},{key:"renderTab",value:function(e){var t=this.getTabs(),n=Object.keys(t),o=t[e];this.currentTabIndex=n.indexOf(e);var i=!n[this.currentTabIndex+1];this.layout.modalContent.currentView.screen.show(new o.View(o.viewOptions)),this.layout.modal.getElements("next").toggle(!i),this.layout.modal.getElements("publish").toggleClass("madxartwork-button-success",i)}},{key:"activateTab",value:function(e){$e.routes.saveState(this.getNamespace()),i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"activateTab",this).call(this,e)}},{key:"open",value:function(){return i(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"open",this).call(this),this.layoutContent||(this.layout.showLogo(),this.layout.modalContent.show(new r.default({component:this})),this.layoutContent=!0),!0}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Marionette.LayoutView),o(t,[{key:"id",value:function(){return"madxartwork-publish"}},{key:"getTemplate",value:function(){return Marionette.TemplateCache.get("#tmpl-madxartwork-component-publish")}},{key:"regions",value:function(){return{screen:"#madxartwork-publish__screen"}}},{key:"templateHelpers",value:function(){return{tabs:this.getOption("component").getTabs()}}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,madxartworkModules.common.views.modal.Layout),o(t,[{key:"getModalOptions",value:function(){return{id:"madxartwork-publish__modal",hide:{onButtonClick:!1}}}},{key:"getLogoOptions",value:function(){return{title:madxartworkPro.translate("publish_settings")}}},{key:"initModal",value:function(){(function e(t,n,o){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var r=Object.getPrototypeOf(t);return null===r?void 0:e(r,n,o)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(o):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initModal",this).call(this),this.modal.addButton({name:"publish",text:madxartworkPro.translate("save_and_close"),callback:function(){return $e.run("theme-builder-publish/save")}}),this.modal.addButton({name:"next",text:madxartworkPro.translate("next"),callback:function(){return $e.run("theme-builder-publish/next")}});var e=this.modal.getElements("publish");this.modal.getElements("next").addClass("madxartwork-button-success").add(e).addClass("madxartwork-button").removeClass("dialog-button")}}]),t}();t.default=i},function(e,t,n){"use strict";var o=madxartwork.modules.components.saver.behaviors.FooterSaver;e.exports=o.extend({ui:function(){var e=o.prototype.ui.apply(this,arguments);return e.menuConditions="#madxartwork-panel-footer-sub-menu-item-conditions",e.buttonPreviewSettings="#madxartwork-panel-footer-theme-builder-button-preview-settings",e.buttonOpenPreview="#madxartwork-panel-footer-theme-builder-button-open-preview",e},events:function(){var e=o.prototype.events.apply(this,arguments);return delete e["click @ui.buttonPreview"],e["click @ui.buttonPreviewSettings"]="onClickButtonPreviewSettings",e["click @ui.buttonOpenPreview"]="onClickButtonPreview",e},initialize:function(){o.prototype.initialize.apply(this,arguments),madxartwork.settings.page.model.on("change",this.onChangeLocation.bind(this))},toggleMenuConditions:function(){this.ui.menuConditions.toggle(!!madxartworkPro.config.theme_builder.settings.location)},onRender:function(){o.prototype.onRender.apply(this,arguments),this.ui.menuConditions=this.view.addSubMenuItem("saver-options",{before:"save-template",name:"conditions",icon:"eicon-flow",title:madxartworkPro.translate("display_conditions"),callback:function(){return $e.route("theme-builder-publish/conditions")}}),this.toggleMenuConditions(),this.ui.buttonPreview.tipsy("disable").html(jQuery("#tmpl-madxartwork-theme-builder-button-preview").html()).addClass("madxartwork-panel-footer-theme-builder-buttons-wrapper madxartwork-toggle-state")},onChangeLocation:function(e){_.isUndefined(e.changed.location)||(madxartworkPro.config.theme_builder.settings.location=e.changed.location,this.toggleMenuConditions())},onClickButtonPublish:function(){var e=madxartworkPro.config.theme_builder.settings.conditions.length,t=madxartworkPro.config.theme_builder.settings.location,n="draft"===madxartwork.settings.page.model.get("post_status");e&&!n||!t?o.prototype.onClickButtonPublish.apply(this,arguments):$e.route("theme-builder-publish/conditions")},onClickButtonPreviewSettings:function(){var e=madxartwork.getPanelView();$e.route("panel/page-settings/settings"),e.getCurrentPageView().activateSection("preview_settings")._renderChildren()}})}]);